$(document).ready(
    function() {
        $.datepicker.setDefaults(
                $.datepicker.regional[ "{{ app.request.getLocale() }}" ]
        );
        $('.js-datepicker').datepicker(
                {
                    dateFormat: 'dd/mm/yy'
                }
        );

        $('.rbins-name-cascade').on(
                'change',
                function() {
                    var fieldsetControl = $($(this).data('target'));
                    var language = $($(this).data('language-source')).val();
                    var formName = $(this).parents('form').attr('name');
                    var intName = $('#'+formName+'_international_name').val();
                    var intDescr = $('#'+formName+'_international_description').val();

                    switch ($(this).val()) {
                        case '1':
                            fieldsetControl.prop('disabled',false);
                            $('#'+formName+'_name_'+language).val(intName).text(intName).prop('disabled',true);
                            $('#'+formName+'_description_'+language).val(intDescr).text(intDescr).prop('disabled',true);
                            fieldsetControl.find('input').not('#'+formName+'_name_'+language).prop('disabled',false);
                            fieldsetControl.find('textarea').not('#'+formName+'_description_'+language).prop('disabled',false);
                            break;
                        case '2':
                            fieldsetControl.prop('disabled',true);
                            fieldsetControl.find('input').val(intName).text(intName);
                            fieldsetControl.find('textarea').val(intDescr).text(intDescr);
                            break;
                        default:
                            fieldsetControl.prop('disabled',false);
                            fieldsetControl.find('input').prop('disabled',false) ;
                            fieldsetControl.find('textarea').prop('disabled',false) ;
                    }
                }
        );

        $('.rbins-language-source, .rbins-int-name, .rbins-int-descr').on(
                'change',
                function () {
                    $($(this).data('cascade-field-class')).trigger('change');
                }
        );
    }
);
