CREATE SEQUENCE teams_members_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE teams_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE projects_members_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE projects_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE teams_projects_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE TABLE teams_members (id INT NOT NULL, person_ref INT DEFAULT NULL, team_ref INT DEFAULT NULL, start_date DATE DEFAULT NULL, end_date DATE DEFAULT NULL, comment VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_ED6F9E4B9722F9B8 ON teams_members (person_ref);
CREATE INDEX IDX_ED6F9E4B4EFCB407 ON teams_members (team_ref);
COMMENT ON COLUMN teams_members.start_date IS 'Entry date of the person in the team';
COMMENT ON COLUMN teams_members.end_date IS 'Exit date of the person in the team';
COMMENT ON COLUMN teams_members.comment IS 'Comment';
CREATE TABLE teams (id INT NOT NULL, international_name VARCHAR(255) NOT NULL, international_description TEXT DEFAULT NULL, international_name_language VARCHAR(255) DEFAULT 'EN' NOT NULL, international_cascade BOOLEAN DEFAULT 'true' NOT NULL, name_en VARCHAR(255) DEFAULT NULL, description_en TEXT DEFAULT NULL, name_fr VARCHAR(255) DEFAULT NULL, description_fr TEXT DEFAULT NULL, name_nl VARCHAR(255) DEFAULT NULL, description_nl TEXT DEFAULT NULL, start_date DATE DEFAULT NULL, end_date DATE DEFAULT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX unq_team_international_name ON teams (international_name);
COMMENT ON COLUMN teams.international_name IS 'The name to be used internationaly';
COMMENT ON COLUMN teams.international_description IS 'Description of the team associated to the international language selected';
COMMENT ON COLUMN teams.international_name_language IS 'The language associated to the international name';
COMMENT ON COLUMN teams.international_cascade IS 'True/False - Tells if the international name and description have to be used for the translated versions';
COMMENT ON COLUMN teams.name_en IS 'Translated name in English';
COMMENT ON COLUMN teams.description_en IS 'Description of the team in English';
COMMENT ON COLUMN teams.name_fr IS 'Translated name in French';
COMMENT ON COLUMN teams.description_fr IS 'Description of the team in French';
COMMENT ON COLUMN teams.name_nl IS 'Translated name in Dutch';
COMMENT ON COLUMN teams.description_nl IS 'Description of the team in Dutch';
COMMENT ON COLUMN teams.start_date IS 'team start date';
COMMENT ON COLUMN teams.end_date IS 'team end date';
CREATE TABLE projects_members (id INT NOT NULL, person_ref INT DEFAULT NULL, project_ref INT DEFAULT NULL, start_date DATE DEFAULT NULL, end_date DATE DEFAULT NULL, comment VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_6863C9EE9722F9B8 ON projects_members (person_ref);
CREATE INDEX IDX_6863C9EE8614E440 ON projects_members (project_ref);
COMMENT ON COLUMN projects_members.start_date IS 'Entry date of the person on the project';
COMMENT ON COLUMN projects_members.end_date IS 'Exit date of the person on the project';
COMMENT ON COLUMN projects_members.comment IS 'Comment';
CREATE TABLE projects (id INT NOT NULL, international_name VARCHAR(255) NOT NULL, international_description TEXT DEFAULT NULL, international_name_language VARCHAR(255) DEFAULT 'EN' NOT NULL, international_cascade BOOLEAN DEFAULT 'true' NOT NULL, name_en VARCHAR(255) DEFAULT NULL, description_en TEXT DEFAULT NULL, name_fr VARCHAR(255) DEFAULT NULL, description_fr TEXT DEFAULT NULL, name_nl VARCHAR(255) DEFAULT NULL, description_nl TEXT DEFAULT NULL, start_date DATE DEFAULT NULL, end_date DATE DEFAULT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX unq_project_international_name ON projects (international_name);
COMMENT ON COLUMN projects.international_name IS 'The name to be used internationaly';
COMMENT ON COLUMN projects.international_description IS 'Description of the project associated to the international language selected';
COMMENT ON COLUMN projects.international_name_language IS 'The language associated to the international name';
COMMENT ON COLUMN projects.international_cascade IS 'True/False - Tells if the international name and description have to be used for the translated versions';
COMMENT ON COLUMN projects.name_en IS 'Translated name in English';
COMMENT ON COLUMN projects.description_en IS 'Description of the project in English';
COMMENT ON COLUMN projects.name_fr IS 'Translated name in French';
COMMENT ON COLUMN projects.description_fr IS 'Description of the project in French';
COMMENT ON COLUMN projects.name_nl IS 'Translated name in Dutch';
COMMENT ON COLUMN projects.description_nl IS 'Description of the project in Dutch';
COMMENT ON COLUMN projects.start_date IS 'Project start date';
COMMENT ON COLUMN projects.end_date IS 'Project end date';
CREATE TABLE teams_projects (id INT NOT NULL, team_ref INT DEFAULT NULL, project_ref INT DEFAULT NULL, start_date DATE DEFAULT NULL, end_date DATE DEFAULT NULL, comment VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_90370B7D4EFCB407 ON teams_projects (team_ref);
CREATE INDEX IDX_90370B7D8614E440 ON teams_projects (project_ref);
COMMENT ON COLUMN teams_projects.start_date IS 'Entry date of the team on the project';
COMMENT ON COLUMN teams_projects.end_date IS 'Exit date of the team on the project';
COMMENT ON COLUMN teams_projects.comment IS 'Comment';
ALTER TABLE teams_members ADD CONSTRAINT FK_ED6F9E4B9722F9B8 FOREIGN KEY (person_ref) REFERENCES person (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE teams_members ADD CONSTRAINT FK_ED6F9E4B4EFCB407 FOREIGN KEY (team_ref) REFERENCES teams (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE projects_members ADD CONSTRAINT FK_6863C9EE9722F9B8 FOREIGN KEY (person_ref) REFERENCES person (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE projects_members ADD CONSTRAINT FK_6863C9EE8614E440 FOREIGN KEY (project_ref) REFERENCES projects (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE teams_projects ADD CONSTRAINT FK_90370B7D4EFCB407 FOREIGN KEY (team_ref) REFERENCES teams (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE teams_projects ADD CONSTRAINT FK_90370B7D8614E440 FOREIGN KEY (project_ref) REFERENCES projects (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
COMMENT ON COLUMN working_duty.percentage IS 'Duty percentage of the person in this department';
COMMENT ON COLUMN working_duty.start_date IS 'Start date of person in this department';
COMMENT ON COLUMN working_duty.end_date IS 'End date of person in this department';
COMMENT ON COLUMN working_duty.comment IS 'Associated description of this duty';
COMMENT ON COLUMN department.level IS 'Level in the hierarchy of organization';
COMMENT ON COLUMN department.name_fr IS 'Name of department/service in french';
COMMENT ON COLUMN department.name_en IS 'Name of department/service in english';
COMMENT ON COLUMN department.name_nl IS 'Name of department/service in dutch';
COMMENT ON COLUMN department.path IS 'Hierarchic path of id in the organization';
COMMENT ON COLUMN person.first_name IS 'First name';
COMMENT ON COLUMN person.last_name IS 'Last name';
COMMENT ON COLUMN person.matricule IS 'Institution internal identifier (matricule)';
COMMENT ON COLUMN person.uid IS 'Unique identifier associated from AD (Active Directory)';
COMMENT ON COLUMN person.email IS 'Person main email';
COMMIT;
